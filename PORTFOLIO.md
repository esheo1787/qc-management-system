# QC Management System

> **Human-in-the-loop QC 운영 시스템 (Data Operations)**
> AI 자동 검수와 사람 검증의 협업 구조를 설계하고, 불일치 패턴을 데이터로 축적하여 검수 기준을 개선하는 시스템

- GitHub: (Public 전환 후 링크 추가 예정)
- 개발 기간: 2026.01 ~
- 개발 인원: 1인

---

## 1. 프로젝트 배경 및 목적

- AI가 생성하거나 처리한 데이터는 자동 검수(Auto-QC)만으로 완벽한 품질 보장이 어려움
- 사람의 도메인 전문성으로 AI가 놓친 오류를 보완하고, 그 과정에서 발견된 패턴을 다시 자동화에 반영하는 구조 필요
- 이 시스템은 의료 영상 세그멘테이션을 구현 예시로 사용했으나, 핵심 구조는 Domain Agnostic함
- **확장성**: 텍스트 요약, 분류, 파이프라인 데이터 검증 등으로 즉시 확장 가능

---

## 2. 시스템 구조 (AI-Human QC 협업 흐름)

```
Pre-QC (자동) → 작업 수행 → Auto-QC (자동) → 검수자 검증 (사람) → 불일치 분석 → 기준 개선
```

| 단계 | 주체 | 설명 |
|------|------|------|
| Pre-QC | 자동 | 작업 전 데이터 품질 분석 (난이도, 노이즈 등) |
| 작업 | 사람 | 실제 작업 수행 |
| Auto-QC | 자동 | 작업 결과 자동 검증 → PASS / WARN / INCOMPLETE |
| 검수 | 사람 | Auto-QC 결과 확인 → 승인 / 재작업 요청 |
| 불일치 분석 | 시스템 | Auto-QC vs 사람 판단 차이 기록 및 분석 |
| 기준 개선 | 운영 | 불일치 패턴 → QC 기준 및 자동화 로직 개선 |

---

## 3. 핵심 개념: 불일치 유형 (Mismatch Type)

AI 자동 검수와 사람 검수의 판단이 다른 경우를 두 가지로 분류:

| 유형 | 영문 | 설명 |
|------|------|------|
| 미검출 | False Negative | AI가 정상으로 판정했으나 실제로는 오류인 케이스 |
| 과검출 | False Positive | AI가 오류로 경고했으나 실제로는 정상인 케이스 |

→ 이 불일치 데이터를 축적하면 "AI가 어디서 틀리는지" 패턴이 보임
→ 이 패턴이 QC 기준 개선 및 모델 재학습의 핵심 자산

---

## 4. 주요 기능

### (A) 케이스 관리
- 등록 / 배정 / 상태 추적 / 이벤트 로그
- 상태: TODO → ASSIGNED → IN_PROGRESS → SUBMITTED → IN_REVIEW → COMPLETED / REWORK

### (B) QC 워크플로우
- 작업자: QC 이슈 수정 체크 + 추가 수정 사항 기록 (유형: 미검출/과검출)
- 검수자: 작업자 수정 확인 + 불일치 기록 + 승인/재작업 결정

### (C) QC 불일치 분석 탭
- 미검출(False Negative) / 과검출(False Positive) 집계
- 세그먼트별(또는 항목별) 불일치 통계
- **운영 지표로서 불일치율(Mismatch Rate)을 추적하여 QC 기준 개선에 활용**

### (D) 작업 통계 대시보드
- 성과: 완료 / 재작업 / 1차 통과율
- 분포: 카테고리별 작업 분포
- 가동률: 근무일 대비 실제 작업 시간

---

## 5. 기술 스택

| 분류 | 기술 |
|------|------|
| Backend | FastAPI, SQLAlchemy, SQLite |
| Frontend | Streamlit |
| Testing | pytest (77 tests) |
| 아키텍처 | router / schema / service / repository 레이어 분리 |
| API 문서화 | Swagger (OpenAPI) |

---

## 6. 설계 원칙 및 구현 특징

- **API 계약 기반 개발**: 기능 변경 없이 안전한 리팩토링 가능
- **단일 집계 함수**: 요약/상세가 동일한 기준으로 계산 (데이터 불일치 방지)
- **테스트 안정성**: 트랜잭션 격리로 77개 테스트 100% 통과 유지
- **저장 후 재조회 패턴**: UI 상태 불일치 방지

---

## 7. 설계 인사이트 (Design Insights)

이 프로젝트를 통해 얻은 운영 관점의 인사이트:

### 1. Disagreement Point가 핵심 자산
- AI와 사람의 판단이 갈라지는 지점(불일치)을 "비용"이 아니라 "자산"으로 봐야 함
- 이 데이터가 모델 성능 향상의 핵심 키

### 2. QC는 단순 검수가 아니라 운영 시스템
- 검수 기준 정의 → 자동화 → 예외 케이스 수집 → 기준 개선
- 이 사이클이 돌아야 품질이 지속적으로 개선됨

### 3. 운영 지표의 중요성
- 불일치율(Mismatch Rate), 1차 통과율, 재작업률 등을 추적해야
- "느낌"이 아닌 "데이터"로 품질을 관리할 수 있음

### 4. 확장 가능한 구조 설계
- 도메인 특화 로직과 공통 QC 로직을 분리
- 새로운 도메인(텍스트, 분류 등)에도 동일 구조 적용 가능

---

## 8. 스크린샷

(추후 추가 예정)
- 전체 케이스 목록
- QC 불일치 분석 탭
- 작업 통계 대시보드
